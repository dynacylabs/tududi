# Tududi Environment Configuration
# Copy this file to .env and customize for your environment

# ============================================
# Required Configuration
# ============================================

# Initial admin user credentials (required for first run)
TUDUDI_USER_EMAIL=admin@example.com
TUDUDI_USER_PASSWORD=your-secure-password-here

# Session encryption secret (generate with: openssl rand -hex 64)
TUDUDI_SESSION_SECRET=generate-a-secure-random-string-here

# ============================================
# Optional Configuration
# ============================================

# Server Configuration
HOST=0.0.0.0
PORT=3002
NODE_ENV=production

# Database Configuration
DB_FILE=/app/backend/db/production.sqlite3

# Upload Configuration
TUDUDI_UPLOAD_PATH=/app/backend/uploads

# CORS Configuration
# Comma-separated list of allowed origins for CORS
# Examples:
#   - Leave unset: Defaults to localhost only
#   - Production: TUDUDI_ALLOWED_ORIGINS=https://tududi.yourdomain.com
#   - Multiple: TUDUDI_ALLOWED_ORIGINS=https://tududi.com,http://localhost:3002
#   - Dev (allow all): TUDUDI_ALLOWED_ORIGINS=""
TUDUDI_ALLOWED_ORIGINS=http://localhost:8080,http://localhost:3002

# Frontend URL (for redirects and OIDC callbacks)
FRONTEND_URL=http://localhost:8080

# ============================================
# OIDC Authentication (Optional)
# ============================================
# Enable OIDC for SSO with Authelia, Keycloak, Auth0, etc.

# Enable OIDC authentication
OIDC_ENABLED=false

# OIDC Provider Configuration
# For Authelia, use your Authelia URL
# For other providers, use their issuer URL
OIDC_ISSUER=https://auth.example.com

# OAuth Client Credentials
# Must match what's registered in your OIDC provider
OIDC_CLIENT_ID=tududi
OIDC_CLIENT_SECRET=your-client-secret-here

# Callback URL - must match exactly what's registered in provider
OIDC_REDIRECT_URI=http://localhost:3002/api/oidc/callback

# Scopes to request (openid is required)
OIDC_SCOPE=openid profile email

# ============================================
# Feature Flags
# ============================================

# Disable task scheduler (useful for testing)
DISABLE_SCHEDULER=false

# Disable Telegram integration
DISABLE_TELEGRAM=false

# ============================================
# Docker User Configuration
# ============================================

# User and Group IDs for Docker container
PUID=1001
GUID=1001

# ============================================
# Google Calendar Integration (Optional)
# ============================================

GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3002/api/calendar/oauth/callback

# ============================================
# Notes
# ============================================

# To use OIDC with Authelia:
# 1. Set OIDC_ENABLED=true above
# 2. Configure your Authelia instance (see authelia-config/configuration.yml)
# 3. Run: npm run migration:run
# 4. Restart the application
#
# For setup help, run: bash scripts/setup-oidc.sh
